import React, { useState, useEffect } from 'react';
import './BedrijvenDashboard.css';
 
function BedrijvenDashboard() {
  const [betalingen, setBetalingen] = useState([]);
  const [afspraken, setAfspraken] = useState([]);
 
  useEffect(() => {
    fetch("http://localhost:3000/api/betalingen")
      .then((res) => res.json())
      .then((data) => setBetalingen(data))
      .catch((error) => console.error("Fout bij laden betalingen:", error));
 
    fetch("http://localhost:3000/api/afspraken")
      .then((res) => res.json())
      .then((data) => setAfspraken(data))
      .catch((error) => console.error("Fout bij laden afspraken:", error));
  }, []);
 
  return (
    <div className="bedrijf-dashboard">
      <main>
        <section className="welkom-section">
          <h2>Welkom, bedrijf!</h2>
          <p>Beheer uw betalingsstatus, afspraken en standplaats</p>
        </section>
 
        <section className="betalingen-section">
          <h2>Staat van betaling:</h2>
          <div className="betalingen-lijst">
            {betalingen.length === 0 ? (
              <p>Geen betalingen gevonden.</p>
            ) : (
              betalingen.map((betaling, index) => (
                <div className="betaling-kaart" key={index}>
                  <p>Factuur: {betaling.factuur}</p>
                  <p>Status: {betaling.status}</p>
                  <p>Bedrag: â‚¬{betaling.bedrag}</p>
                  <p>Datum: {betaling.datum}</p>
                </div>
              ))
            )}
          </div>
        </section>
 
        <section className="afspraken-section">
          <h2>Afspraken overzicht:</h2>
          <div className="afspraken-lijst">
            {afspraken.length === 0 ? (
              <p>Geen afspraken gevonden.</p>
            ) : (
              afspraken.map((afspraak, index) => (
                <div className="afspraak-kaart" key={index}>
                  <p>Naam: {afspraak.naam}</p>
                  <p>Tijd: {afspraak.tijd}</p>
                  <p>LinkedIn: <a href={afspraak.linkedin} target="_blank" rel="noopener noreferrer">Bekijk profiel</a></p>
                  <p>Skills: {afspraak.skills?.join(', ')}</p>
                </div>
              ))
            )}
          </div>
        </section>
 
        <section className="instellingen-section">
          <h2>Instellingen:</h2>
          <button>Beheer bedrijfsinstellingen</button>
        </section>
      </main>
    </div>
  );
}
 
export default BedrijvenDashboard;